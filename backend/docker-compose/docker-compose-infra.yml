services:

  quartz_web_task_service:
    container_name: quartz_web_task_service
    image: marekbf3/quartz-web-task-service
    ports:
      - '5001:80'
    environment: 
      - "ClientKey=testk"
      - "ManagmentKey=testm"

  mongodb:
    container_name: mongodb
    ports:
      - '27017:27017'
    build:
      context: ../src/MongoDb/standalone
      dockerfile: Dockerfile-mongo-standalone-replicaset

  sql_server:
    container_name: sql_server
    environment:
      - ACCEPT_EULA=Y
      - SA_PASSWORD=Qwerty1234
      - MSSQL_AGENT_ENABLED=True
    ports:
      - '1433:1433'
    image: marekbf3/auctionhouse-sqlserver
    healthcheck:
      test: "sqlcmd -S 127.0.0.1 -U sa -P 'Qwerty1234' -d AuctionhouseDatabase -Q 'select distinct 1 from dbo.Events' && sqlcmd -S 127.0.0.1 -U sa -P 'Qwerty1234' -d AuctionhouseDatabase -Q 'select distinct 1 from dbo.AuthData'"

  rabbitmq:
    container_name: rabbitmq
    image: rabbitmq:3-management
    ports:
      - '5672:5672'
      - '15672:15672'

  zipkin:
    image: openzipkin/zipkin
    ports:
      - '9411:9411'

  seq:
    image: datalust/seq
    environment:
        - ACCEPT_EULA=y
    ports:
        - '8011:80'
        - '5341:5341'